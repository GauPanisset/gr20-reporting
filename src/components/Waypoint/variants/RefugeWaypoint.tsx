import React from 'react'
import styled from 'styled-components'

import { useWaypoint } from '../useWaypoint'
import { WaypointProps } from '../waypointProps'

const LightPath = styled.path`
  fill: var(--light-color);
  stroke: var(--light-color);
`

/**
 * Waypoint component attached to the 'refuge' waypoint.
 * It displays a pin showing the position of the refuge.
 *
 * TODO Work in progress
 */
const Waypoint = ({ isActive = false, waypoint, x, y }: WaypointProps) => {
  const handleEnter = React.useCallback(() => {
    console.log('Refuge is activated')
  }, [])
  const handleLeave = React.useCallback(() => {
    console.log('Refuge is deactivated')
  }, [])

  useWaypoint({
    isActive,
    onEnter: handleEnter,
    onLeave: handleLeave,
    waypointId: waypoint.id,
  })

  return (
    <svg x={x - 12} y={y - 24} z={1} width={24} height={24} viewBox="0 0 40 50">
      <LightPath
        d="M27.4549 37.482L27.1209 37.6246L26.9562 37.9483C26.9475 37.9655 26.9382 37.9827 26.9282 38C26.9282 38 26.9282 38 26.9282 38L20.866 48.5C20.4811 49.1667 19.5189 49.1667 19.134 48.5L13.0718 38L12.2058 38.5L13.0718 38C13.0618 37.9828 13.0525 37.9655 13.0438 37.9483L12.8791 37.6246L12.5451 37.482C5.75542 34.5827 1 27.8456 1 20C1 9.50659 9.50659 1 20 1C30.4934 1 39 9.50659 39 20C39 27.8456 34.2446 34.5827 27.4549 37.482Z"
        fillOpacity={0.3}
        strokeWidth={2}
      />
      <svg x={7} width="65%" height="75%" viewBox="0 0 256 141">
        <LightPath d="M78.0011 19.5H168.847C168.56 20.2777 168.256 21.0961 167.937 21.9522C165.233 29.202 161.422 39.1451 156.993 49.9224C148.07 71.6343 136.845 96.2087 127.215 109.237C120.589 118.201 114.741 125.07 110.564 129.684C109.882 130.437 109.246 131.13 108.657 131.762L104.849 118.356C104.245 116.231 102.033 114.998 99.908 115.602C97.783 116.206 96.5497 118.418 97.1534 120.543L102.823 140.5H13.1637H7.28472L6.70635 138.765L0.206352 119.265C-0.492239 117.169 0.640401 114.904 2.73617 114.205C4.83195 113.507 7.09723 114.639 7.79582 116.735L12.1255 129.724C12.5327 129.255 12.9655 128.752 13.423 128.215C17.1869 123.804 22.6287 117.127 29.2845 108.122C38.9411 95.0583 49.1597 73.4579 57.0436 54.8269C60.9609 45.5696 64.2606 37.1461 66.5809 31.0369C67.7407 27.9832 68.6549 25.5102 69.2782 23.803C69.5899 22.9495 69.8288 22.2877 69.9892 21.8406L70.0011 21.8076V4C70.0011 1.79086 71.7919 0 74.0011 0C76.2102 0 78.0011 1.79086 78.0011 4L78.0011 19.5ZM244.788 140.5L245.631 138.681L254.631 119.251C255.559 117.246 254.687 114.869 252.682 113.94C250.678 113.012 248.3 113.884 247.372 115.889L241.02 129.602C240.323 128.748 239.541 127.782 238.68 126.704C234.615 121.615 228.785 114.049 221.76 104.18C211.522 89.7982 201.16 68.2577 193.297 50.0981C189.384 41.0604 186.121 32.9361 183.838 27.072C183.47 26.1283 183.128 25.2434 182.813 24.4228L182.029 136.556L182.001 140.5H239.753H244.788ZM174.001 140.5L174.029 136.5L174.799 26.4416C172.125 33.5681 168.527 42.9016 164.392 52.9633C155.515 74.5657 143.955 100.048 133.648 113.992C126.847 123.192 120.828 130.266 116.495 135.053C114.33 137.445 112.584 139.268 111.372 140.5H174.001Z" />
      </svg>
    </svg>
  )
}

export default Waypoint
